#!/bin/bash

# 指定的 JAR 文件列表
jar_files=(
"acesseonline-1.0.jar"
"ant-1.10.11.jar"
"ant-launcher-1.10.11.jar"
"antlr-2.7.5.jar"
"avalon-framework-impl-4.2.0.jar"
"barbecue-1.5-beta1.jar"
"barcode4j-2.1.jar"
"batik-anim-1.17.jar"
"batik-awt-util-1.17.jar"
"batik-bridge-1.17.jar"
"batik-constants-1.17.jar"
"batik-css-1.17.jar"
"batik-dom-1.17.jar"
"batik-ext-1.17.jar"
"batik-gvt-1.17.jar"
"batik-i18n-1.17.jar"
"batik-parser-1.17.jar"
"batik-script-1.17.jar"
"batik-shared-resources-1.17.jar"
"batik-svg-dom-1.17.jar"
"batik-svggen-1.17.jar"
"batik-transcoder-1.17.jar"
"batik-util-1.17.jar"
"batik-xml-1.17.jar"
"byte-buddy-1.10.17.jar"
"cdt-java-client-4.0.0.jar"
"classmate-1.5.1.jar"
"commons-beanutils-1.9.4.jar"
"commons-cli-1.0.jar"
"commons-codec-1.15.jar"
"commons-collections-3.2.2.jar"
"commons-collections4-4.2.jar"
"commons-compress-1.21.jar"
"commons-dbcp-1.2.jar"
"commons-digester-2.1.jar"
"commons-discovery-0.2.jar"
"commons-io-2.11.0.jar"
"commons-lang-1.0.jar"
"commons-lang-2.4.jar"
"commons-lang3-3.11.jar"
"commons-logging-1.1.1.jar"
"commons-math-1.0.jar"
"commons-math3-3.6.1.jar"
"commons-pool-1.3.jar"
"commons-pool2-2.4.2.jar"
"commons-vfs-1.0.jar"
"core-3.4.0.jar"
"curvesapi-1.07.jar"
"dom4j-2.1.3.jar"
"ecj-3.21.0.jar"
"eigenbase-properties-1.1.0.10924.jar"
"eigenbase-resgen-1.3.0.11873.jar"
"eigenbase-xom-1.3.0.11999.jar"
"FastInfoset-1.2.15.jar"
"grizzly-framework-2.3.25.jar"
"grizzly-http-2.3.25.jar"
"grizzly-http-server-2.3.25.jar"
"groovy-2.4.12.jar"
"groovy-4.0.8.jar"
"groovy-sandbox-1.26-jaspersoft-2.jar"
"hibernate-commons-annotations-5.1.2.Final.jar"
"hibernate-core-5.4.24.Final.jar"
"httpclient-4.5.13.jar"
"httpcore-4.4.12.jar"
"icu4j-70.1.jar"
"istack-commons-runtime-3.0.7.jar"
"jackson-annotations-2.14.1.jar"
"jackson-core-2.14.1.jar"
"jackson-databind-2.14.1.jar"
"jackson-dataformat-xml-2.14.1.jar"
"jackson-module-jaxb-annotations-2.14.1.jar"
"jakarta.activation-api-1.2.2.jar"
"jakarta.xml.bind-api-2.3.3.jar"
"jandex-2.1.3.Final.jar"
"jasperreports-6.20.6.jar"
"jasperreports-annotation-processors-6.20.6.jar"
"jasperreports-castor-6.20.6.jar"
"jasperreports-chart-customizers-6.20.6.jar"
"jasperreports-chart-themes-6.20.6.jar"
"jasperreports-custom-visualization-6.20.6.jar"
"jasperreports-fastexcel-6.20.6.jar"
"jasperreports-fonts-6.20.6.jar"
"jasperreports-functions-6.20.6.jar"
"jasperreports-metadata-6.20.6.jar"
"jasperreports-xalan-6.20.6.jar"
"javacup-0.10k.jar"
"javassist-3.27.0-GA.jar"
"javax.activation-api-1.2.0.jar"
"javax.persistence-api-2.2.jar"
"javax.websocket-api-1.1.jar"
"javax.xml.soap-api-1.4.0.jar"
"jaxb-api-2.3.1.jar"
"jaxb-runtime-2.3.1.jar"
"jaxen-1.2.0.jar"
"jboss-logging-3.4.1.Final.jar"
"jboss-transaction-api_1.2_spec-1.1.1.Final.jar"
"jcommander-1.82.jar"
"jcommon-1.0.23.jar"
"jfreechart-1.0.19.jar"
"jquery-3.6.1.jar"
"junit-3.7.jar"
"log4j-api-2.17.1.jar"
"log4j-core-2.17.1.jar"
"log4j-jcl-2.17.1.jar"
"lucene-analyzers-common-8.11.2.jar"
"lucene-core-8.11.2.jar"
"lucene-queries-8.11.2.jar"
"lucene-queryparser-8.11.2.jar"
"lucene-sandbox-8.11.2.jar"
"metadata-extractor-2.18.0.jar"
"mondrian-3.1.1.12687.jar"
"net.tascalate.asmx-9.3.0.jar"
"net.tascalate.asmx.analysis-9.3.0.jar"
"net.tascalate.asmx.plus-9.3.0.jar"
"net.tascalate.asmx.tree-9.3.0.jar"
"net.tascalate.javaflow.api-2.7.3.jar"
"net.tascalate.javaflow.providers.core-2.7.3.jar"
"net.tascalate.javaflow.spi-2.7.3.jar"
"net.tascalate.javaflow.tools.ant-2.7.3.jar"
"net.tascalate.javaflow.tools.jar-2.7.3.jar"
"olap4j-0.9.7.309-JS-3.jar"
"openpdf-1.3.30.jaspersoft.3.jar"
"poi-5.2.2.jar"
"poi-ooxml-5.2.2.jar"
"poi-ooxml-lite-5.2.2.jar"
"rhino-1.7.14.jar"
"saaj-api-1.3.jar"
"servlet-api-2.4.jar"
"slf4j-api-1.8.0-beta4.jar"
"SparseBitSet-1.2.jar"
"spring-beans-5.3.27.jar"
"spring-core-5.3.27.jar"
"spring-jcl-5.3.27.jar"
"stax2-api-4.2.1.jar"
"stax-ex-1.8.jar"
"testng-7.7.0.jar"
"txw2-2.3.1.jar"
"tyrus-client-1.13.1.jar"
"tyrus-container-grizzly-client-1.13.1.jar"
"tyrus-core-1.13.1.jar"
"tyrus-spi-1.13.1.jar"
"update4j-1.5.6.jar"
"velocity-engine-core-2.3.jar"
"woodstox-core-6.4.0.jar"
"xml-apis-1.4.01.jar"
"xml-apis-ext-1.3.04.jar"
"xmlbeans-5.0.3.jar"
"xmlgraphics-commons-2.9.jar"
"xmpcore-6.1.11.jar"
)


# 指定的目录
directory=$1

if [ -z "$directory" ]; then
    echo "Usage: $0 <directory>"
    exit 1
fi

# 存储需要安装的 JAR 文件
declare -a to_install

# 检查每个 JAR 文件是否存在其他版本
for jar in "${jar_files[@]}"; do
    base_name=$(echo "$jar" | sed -E 's/(-[0-9]+.*)?\.jar$//')
    found_files=$(find "$directory" -type f -name "${base_name}-*.jar")
    
    if [ -n "$found_files" ]; then
        echo "Found $base_name..."
    else
        echo "$jar needs to be installed."
        to_install+=("$jar")
    fi
done

# 显示需要安装的 JAR 文件
if [ ${#to_install[@]} -ne 0 ]; then
    echo "The following JAR files need to be installed:"
    for jar in "${to_install[@]}"; do
        echo "$jar"
    done
else
    echo "All required JAR files are already installed."
fi
